parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Focm":[function(require,module,exports) {
var t,e,a,n,r=["ca","dk","gr","is","mx","ph","sv","ar","ch","do","gt","it","my","pl","th","at","cl","ec","hk","jp","pt","tr","au","co","hn","nl","py","tw","be","cr","es","hu","no","ro","us","fi","id","nz","se","uy","bo","cz","fr","ie","pa","sg","vn","br","de","gb","il","pe","sk","global"],i=["Canada","Denmark","Greece","Iceland","Mexico","Philippines","El Salvador","Argentina","Switzerland","Dominican Republic","Guatemala","Italy","Malaysia","Poland","Thailand","Austria","Chile","Ecuador","Hong Kong","Japan","Portugal","Turkey","Australia","Columbia","Honduras","Netherlands","Paraguay","Taiwan","Belgium","Costa Rica","Spain","Hungary","Norway","Romania","United States","Finland","Indonesia","New Zealand","Sweden","Uruguay","Bolivia","Czech Republic","France","Ireland","Panama","Singapore","Vietnam","Brazil","Germany","United Kingdom","Israel","Peru","Slovakia","global"],l=i.slice(0).sort(),o=[],d=1,c={top:15,right:25,bottom:30,left:10},s=1200-c.left-c.right,u=612-c.top-c.bottom,p=d3.scaleBand().range([u,0]).padding(.1),f=d3.scaleLinear().range([0,s]);function g(){a=["Sunflower - Spider-Man: Into the Spider-Verse","thank u, next","Wow.","Without Me","Taki Taki (with Selena Gomez, Ozuna & Cardi B)","Calma - Remix","Sweet but Psycho","MIA (feat. Drake)","High Hopes","Happier"],e=[[parseInt("4323160"),"10"],[parseInt("4275439"),"9"],[parseInt("3947420"),"8"],[parseInt("3307383"),"7"],[parseInt("3188386"),"6"],[parseInt("2896056"),"5"],[parseInt("2642425"),"4"],[parseInt("2598097"),"3"],[parseInt("2512089"),"2"],[parseInt("2419735"),"1"]],d3.csv("streamsglobal10.csv").then(function(t){o=t})}function m(){n=d3.select("body").append("svg").attr("width",s+c.left+c.right).attr("height",u+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")"),f.domain([0,d3.max(e,function(t){return t[0]})]),p.domain(d3.range(1,e.length+1)),n.selectAll("rect").data(e).enter().append("rect").attr("class","bar").attr("width",function(t){return f(t[0])}).attr("y",function(t){return p(t[1])}).attr("fill",function(){return"rgb(30, 215, 96)"}).attr("height",p.bandwidth()),n.append("g").attr("transform","translate(0,"+u+")").call(d3.axisBottom(f)),n.append("g").call(d3.axisLeft(p).tickSize(0).tickFormat("")),n.selectAll("text.value").data(e).enter().append("text").text(function(t){return a[parseInt(t[1])-1]}).attr("text-anchor","end").attr("y",function(t,a){return(9-a)*(u/e.length)+27}).attr("x",function(t){var a=t[1],n=e[a-1][0];return f(n)-8}).attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight",550).attr("fill","black")}function h(t,e,a,r){n.selectAll("text").remove(),n.selectAll("g").remove(),n.append("g").attr("transform","translate(0,"+u+")").call(d3.axisBottom(f)),n.append("g").call(d3.axisLeft(p).tickSize(0).tickFormat("")),n.selectAll("title").remove(),n.selectAll("rect").append("title").text(function(e){var n=10-parseInt(e[1]);return'"'+t[n]+'" by '+a[n]+": "+e[0]+" streams on "+window[sliderDate]});n.selectAll("text.value").data(e).enter().append("text").text(function(t){return r[parseInt(t[1])-1]}).attr("text-anchor","end").attr("y",function(t,a){return(9-a)*(u/e.length)+27}).attr("x",function(t){var a=t[1],n=e[a-1][0];return f(n)-8}).attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight",550).attr("fill","black")}function v(t){var e=n.selectAll("rect").data(t);e.enter().append("rect").attr("class","bar").attr("width",function(t){return f(t[0])}).attr("y",function(t){return p(t[1])}).attr("fill",function(t){return"rgb(0, 0, "+10*t[0]+")"}).attr("height",p.bandwidth()).merge(e).attr("x",function(t,e){return f(t[1])}).attr("y",function(t){return p(t[1])}).attr("width",function(t){return f(t[0])}).attr("height",p.bandwidth())}function x(t){for(var e=[[]],a=[""],n=[""],r=[""],i=0;i<t.length;i++){var l=[parseInt(t[i].Streams),10-i+""],o=t[i]["Track Name"];n[i]=o,t[i]["Track Name"].length>30&&(o=o.substring(0,31)+"..."),a[i]=o,r[i]=t[i].Artist,e[i]=l}f.domain([0,d3.max(e,function(t){return t[0]})]),p.domain(d3.range(1,e.length+1)),v(e),h(n,e,r,a)}g(),m();var w=function(t,e){for(var a=new Array,n=new Date(t);n<=e;){var r=new Date(n),i=r.getFullYear()+"-";r.getMonth()<9&&(i+="0"),i=i+(r.getMonth()+1)+"-",r.getDate()<10&&(i+="0"),i+=r.getDate(),a.push(i),n.setDate(n.getDate()+1)}return a},b=w(new Date("2019-01-01"),new Date("2020-01-01"));t=b[0];var y=d3.select("#vis-container-country").insert("select","svg").on("change",function(){var e=d3.select(this).property("value"),a=i.indexOf(e),n="streams"+r[a]+"10.csv";d3.csv(n).then(function(e){o=e,x(e.filter(function(e){return e.date===t}))})}),I=d3.select("#vis-container-date").insert("select","svg").on("change",function(){t=d3.select(this).property("value"),x(o.filter(function(e){return e.date===t}))});y.selectAll("option").data(l).enter().append("option").attr("value",function(t){return t}).attr("selected",function(t){return"Global"===t}).text(function(t){return t[0].toUpperCase()+t.slice(1,t.length)}),I.selectAll("option").data(b).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),function(){var e,a,n;window.onload=function(){e=d3.range(0,53).map(function(t){return new Date(2019,0,1+7*t)}),a=d3.sliderBottom().min(d3.min(e)).max(d3.max(e)).step(28).width(1240-c.left-c.right).tickFormat(d3.timeFormat("%m-%d")).tickValues(e).displayValue(!1).on("onchange",function(e){d3.select("p#value").text(d3.timeFormat("%m-%d-%Y")(e)),window[sliderDate]=d3.timeFormat("%Y-%m-%d")(e),t=d3.timeFormat("%Y-%m-%d")(e),console.log(localStorage.getItem("currDate"));var a=o.filter(function(e){for(var a=0;a<o.length;a++)return e.date===t});x(a)}),(n=d3.select("div#slider").append("svg").attr("width",1350-c.left-c.right).attr("height",132-c.top-c.bottom).append("g").attr("transform","translate(30,30)")).call(a),n.selectAll("text").attr("dx","-10px").attr("dy","-16px"),d3.select("p#value").text(d3.timeFormat("%m-%d-%Y")(a.value())),sliderDate=d3.timeFormat("%Y-%m-%d")(a.value())}}();
},{}]},{},["Focm"], null)
//# sourceMappingURL=/src.1575de14.js.map